@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    scroll-behavior: smooth;
  }
  
  body {
    @apply bg-vipro-warm dark:bg-vipro-night text-vipro-night dark:text-vipro-warm transition-colors duration-300;
  }
  
  h1, h2, h3, h4 {
    @apply font-serif;
  }

  /* Performance optimizations */
  * {
    box-sizing: border-box;
  }

  /* Prevent layout shifts with fixed dimensions */
  img, video, iframe {
    height: auto;
    max-width: 100%;
    /* Reserve space to prevent layout shift */
    aspect-ratio: attr(width) / attr(height);
  }

  /* Critical fonts preload */
  .font-serif {
    font-display: swap;
  }

  .font-sans {
    font-display: swap;
  }
}

@layer components {
  .section-container {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 sm:py-24;
    /* Prevent layout shifts */
    min-height: 200px;
  }
  
  .btn-primary {
    @apply bg-vipro-earth hover:bg-vipro-green text-white font-medium px-8 py-3 rounded-lg transition-all duration-300 transform hover:scale-105 will-change-transform;
    /* Fixed dimensions to prevent layout shift */
    min-width: 120px;
    height: 44px;
  }
  
  .btn-secondary {
    @apply bg-transparent border-2 border-vipro-earth text-vipro-earth hover:bg-vipro-earth hover:text-white font-medium px-8 py-3 rounded-lg transition-all duration-300;
    /* Fixed dimensions to prevent layout shift */
    min-width: 120px;
    height: 44px;
  }

  /* Animation optimizations */
  .animate-pulse {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  .animate-spin {
    animation: spin 1s linear infinite;
  }

  /* Performance utilities */
  .gpu-accelerated {
    @apply transform-gpu;
  }

  /* Text truncation utilities */
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-4 {
    display: -webkit-box;
    -webkit-line-clamp: 4;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Video container to prevent layout shift */
  .aspect-video {
    position: relative;
    width: 100%;
    height: 0;
    padding-bottom: 56.25%; /* 16:9 aspect ratio */
  }

  .aspect-video iframe,
  .aspect-video video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }

  /* Form inputs - Garantizar legibilidad en todos los temas */
  input[type="text"],
  input[type="email"],
  input[type="tel"],
  input[type="url"],
  input[type="password"],
  input[type="date"],
  textarea,
  select {
    @apply bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100;
  }

  input::placeholder,
  textarea::placeholder {
    @apply text-gray-400 dark:text-gray-500 opacity-100;
  }

  /* Forzar colores en autofill */
  input:-webkit-autofill,
  input:-webkit-autofill:hover,
  input:-webkit-autofill:focus,
  input:-webkit-autofill:active {
    -webkit-box-shadow: 0 0 0 30px white inset !important;
    -webkit-text-fill-color: #1a1a2e !important;
  }

  .dark input:-webkit-autofill,
  .dark input:-webkit-autofill:hover,
  .dark input:-webkit-autofill:focus,
  .dark input:-webkit-autofill:active {
    -webkit-box-shadow: 0 0 0 30px #1f2937 inset !important;
    -webkit-text-fill-color: #f3f4f6 !important;
  }
}
